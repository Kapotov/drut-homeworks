# Домашнее задание к занятию "Передача маршрутной информации между различными протоколами маршрутизации"

### Цель задания

Данное домашнее задание позволит понять процесс перераспределения маршрутов. А также разобраться, каким образом можно импортировать и экспортировать разные типы маршрутов между различными протоколами динамической маршрутизации.

В результате выполнения этого задания вы:
1) Научитесь делать конфигурацию различных типов
2) Научитесь импортировать маршруты в протокол OSPF
3) Научитесь импортировать маршруты в BGP

------

### Инструкция к выполнению домашнего задания

1. Сделайте копию [Шаблона для домашнего задания](https://docs.google.com/document/d/1youKpKm_JrC0UzDyUslIZW2E2bIv5OVlm_TQDvH5Pvs/edit) себе на Google Disk.
2. В названии файла введите корректное название лекции и вашу фамилию и имя.
3. Зайдите в “Настройки доступа” и выберите доступ “Просматривать могут все в Интернете, у кого есть ссылка”.  Ссылка на инструкцию [Как предоставить доступ к файлам и папкам на Google Диске](https://support.google.com/docs/answer/2494822?hl=ru&co=GENIE.Platform%3DDesktop)
4. Скопируйте текст задания в свой документ.
5. Выполните домашнее задание, запишите ответы и приложите необходимые скриншоты в свой Google Doc.
6. Для проверки домашнего задания преподавателем отправьте ссылку на ваш документ в личном кабинете.
7. Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Совет
Можете использовать симулятор для построения топологии и проверки/поиска ответов на задания. 

------

Наша топология:
![image](https://user-images.githubusercontent.com/51816695/154713259-4202c075-9223-441f-bdba-f81895cd6690.png)

### Задание 1. 

На нашей топологии  R4 получает маршруты ( 8.8.4.0/24, 8.8.8.0/24) по протоколу BGP.  
Настроено распределение маршрутов из BGP в OSPF на маршрутизаторе R4. R4 получает маршруты ( 8.8.4.0/24, 8.8.8.0/24).  
- Area 3 - тупиковая ( stub ) зона
- Area 5 - обычная зона
- Area 7 - Totally NSSA зона

1) При помощи какой команды можно настроить импорт маршрутов из BGP в OSPF и на каком маршрутизаторе? Напишите маршрутизатор и команду полностью.
2) Какие типы LSA будут отправлены в каждую из зон (Area 0,3,5,7) для отправки информации о импортированных маршрутах (8.8.4.0/24, 8.8.8.0/24)? Напишите список зон с указанием типов LSA.

*Приведите ответы на вопросы в свободной форме*
# Ответ:
```
Для импорта маршрутов из BGP в OSPF на маршрутизаторе R4, необходимо использовать команду `redistribute bgp [AS_number] subnets` в режиме настройки OSPF, где [AS_number] - номер автономной системы, к которой принадлежит R4. Полностью команда будет выглядеть, например, как `redistribute bgp 4444 subnets`.

Типы LSA, которые будут отправлены в разные зоны:
- Area 0: LSA Type 2 (Network LSA)
- Area 3: LSA Type 3 (Summary LSA), так как это тупиковая зона (stub), будут ограничения на передачу внешних маршрутов.
- Area 5: LSA Type 5 (External LSA), так как это обычная зона.
- Area 7: LSA Type 3 (Summary LSA) в зону будет отправляться маршрут по умолчанию 
```

------

### Задание 2.

На нашей топологии в OSPF импортированы следующие маршруты:
- (8.8.4.0/24, 8.8.8.0/24) из BGP
- 172.16.1.0/24, 172.16.5.0/24 из Area 5 (обычная зона)
- 172.16.1.0/24, 172.16.7.0/24 из Area 7 (Totally NSSA зона)

1) Какой тип зоны необходимо задать для Area 3, чтобы размер LSDB был минимальным? Какие типы LSA будут на маршрутизаторах в Area 3, не учитывая LSA 1 и 2? 
2) Какие внешние маршруты будут установлены в таблицу маршрутизации на маршрутизаторах в Area 3?

*Приведите ответы на вопросы в свободной форме*
# Ответ:
```
Для минимизации размера LSDB в Area 3, необходимо оставить её тупиковой (stub) или сделать Totally Stubby, чтобы предотвратить флудинг внешних маршрутов в эту зону. В Area 3 маршрутизаторы будут иметь:
- LSA Type 3 (Summary LSA) - для маршрутов внутри OSPF
- Не будут иметь LSA Type 4 и 5, если зона настроена как stub или totally stub.

В таблицу маршрутизации на маршрутизаторах в Area 3 будут установлены маршруты согласно политикам тупиковой зоны. Обычно будет только один маршрут по умолчанию, добавленный ABR, для доступа к внешним сетям.
```

------

### Задание 3.

На нашей топологии в OSPF импортированы только следующие маршруты:
- 172.16.1.0/24, 172.16.5.0/24 из Area 5 (обычная зона)
- 172.16.1.0/24, 172.16.7.0/24 из Area 7 (Totally NSSA зона)

Необходимо импортировать только данные маршруты  с метрикой 50 в протокол BGP, чтобы они оказались в таблице на маршрутизаторе R5.

1) Какую команду и на каком маршрутизаторе необходимо использовать для выполнения данной задачи? 
2) С помощью какого параметра и каким образом можно проверить на R5, что данные маршруты импортированы корректно?

*Приведите ответы на вопросы в свободной форме*
# Ответ:
```
Чтобы импортировать маршруты из OSPF в BGP на маршрутизаторе, скажем R1, с метрикой 50, можно использовать команду `redistribute ospf [process_id] match external 1 external 2 nssa-external 1 nssa-external 2 metric 50` в режиме настройки BGP. Метрика 50 будет присвоена всем импортированным маршрутам.

На R5 статус импортированных маршрутов можно проверить с помощью команды `show ip bgp`, что покажет BGP таблицу маршрутизации этого устройства.
```
------

### Задание 4.

На нашей топологии настроены следующие зоны:
- Area 3 - тупиковая (stub) зона
- Area 5 - обычная зона
- Area 7 - Totally NSSA зона

В Area 5 на маршрутизаторе R7 и в Area 7 есть статический маршрут до сети 172.16.1.0/24. Необходимо импортировать данный маршрут в обоих зонах и при этом необходимо учитывать метрику всех линков, которые будут использоваться. 

1) При помощи какой команды на R7 и R9 можно выполнить данную задачу? 
2) Какие типы LSA в зонах (Area 0, 3, 5, 7) будут использованы для передачи информации об этом маршруте? 

*Приведите ответы на вопросы в свободной форме*
# Ответ:
```
Чтобы выполнить данную задачу, на маршрутизаторах R7 и R9 необходимо использовать следующую команду в режиме конфигурации OSPF:


area <area\_id> range <network> <mask> [advertise | cost <cost> | no-summary]


Где:
- <area\_id> - идентификатор зоны, в данном случае, 5 и 7 соответственно,
- <network> - сеть, которую необходимо добавить,
- <mask> - маска сети,
- advertise - для объявления информации о данной сети,
- cost <cost> - можно указать стоимость маршрута,
- no-summary - отменяет объединение маршрутов.

Типы LSA в зонах для передачи информации об этом маршруте:
- Area 0: LSA Type 5 (External LSA), так как это обычная зона.
- Area 3: LSA Type 3 (Summary LSA) и возможно не будет LSA для внешнего маршрута, если зона конфигурирована как stub или totally stub.
- Area 5: LSA Type 5 (External LSA) , так как это обычная зона.
- Area 7: LSA Type 7 (NSSA External LSA).
```

------

### Правила приема домашнего задания

В личном кабинете отправлена ссылка на документ (Google Doc) с выполненным заданием. В документе настроены права доступа “Просматривать могут все в Интернете, у кого есть ссылка”.

### Критерии оценки

Зачет - выполнены все задания, ответы даны в развернутой форме, приложены соответствующие скриншоты и файлы проекта, в выполненных заданиях нет противоречий и нарушения логики.

На доработку - задание выполнено частично или не выполнено, в логике выполнения заданий есть противоречия, существенные недостатки.
